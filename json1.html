<!DOCTYPE html>
<head>
        <title>JSON Song List</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <link rel="stylesheet" type = "text/css" href="style.css">
</head>
<body>
        <script>
                // create a song array
                let song =
                [
                        {
                                "artists": ["Omar Apollo"],
                                "title": "3 Boys",
                                "genre": ["R&B"],
                                "year": 2023,
                        },
                        {
                                "artists": ["Lil Baby", "42 Dug"],
                                "title": "We Paid",
                                "genre": ["Hip-Hop"],
                                "year": 2021,
                        },
                        {
                                "artists": ["SZA"],
                                "title": "Nobody Gets Me",
                                "genre": ["R&B", "Soul"],
                                "year": 2022,
                        },
                        {
                                "artists":["Mitski"],
                                "title": "Two Slow Dancers",
                                "genre": ["Alternative/Indie"],
                                "year": 2018,
                        },
                        {
                                "artists": ["Lorde"],
                                "title": "Writer in the Dark",
                                "genre": ["Alternative/Indie", "Pop"],
                                "year": 2017,
                        },
                        {
                                "artists": ["Frank Ocean"],
                                "title": "Ivy",
                                "genre": ["R&B", "Soul"],
                                "year": 2016,
                        },
                        {
                                "artists": ["Joji"],
                                "title": "Slow Dancing in the Dark",
                                "genre": ["Alternative/Indie", "Pop"],
                                "year": "2018",
                        },
                        {
                                "artists": ["Kali Uchis"],
                                "title": "After the Storm",
                                "genre": ["R&B", "Soul"],
                                "year": 2018,
                        },
                        {
                                "artists": ["The 1975"],
                                "title": "Be My Mistake",
                                "genre": ["Alternative/Indie", "Pop"],
                                "year": 2018,
                        },
                        {
                                "artists": ["Omar Apollo"],
                                "title": "Petrified",
                                "genre": ["Alternative/Indie", "R&B/Soul", "Pop", "UK R&B", "Afroswing"],
                                "year": 2018,
                        },
                        {
                                "artists": ["Taylor Swift", "Lana Del Rey"],
                                "title": "Snow On The Beach",
                                "genre": ["Dream Pop", "Holiday"],
                                "year": 2022,
                        },
                        {
                                "artists": ["Frank Ocean"],
                                "title": "Thinkin Bout You",
                                "genre": ["R&B/Soul", "Contemporary R&B", "Indonesian Hip Hop", "Pop"],
                                "year": 2012,
                        },
                        {
                                "artists": ["Maggie Rogers"],
                                "title": "Dog Years",
                                "genre": ["Alternative/Indie"],
                                "year": 2017,
                        },
                        {
                                "artists": ["Olivia Rodrigo"],
                                "title": "favorite crime",
                                "genre": ["Indie pop", "Folk-pop", "Pop"],
                                "year": 2021,
                        },
                        {
                                "artists": ["Lorde"],
                                "title": "Solar Power",
                                "genre": ["Alternative/Indie"],
                                "year": 2021,
                        },
                ]
                document.write(JSON.stringify(song))
        </script>
        <br><hr><br>
        <div class="form">
                <h3>Sort by Genre</h3> <br>
        <form>
                <label for="genre" class="label">Genre:</label>
                <select>
                        <option value="All">All</option>
                        <option value="Alternative/Indie">Alternative/Indie</option>
                        <option value="Indie pop">Indie pop</option>
                        <option value="Folk-pop">Folk-pop</option>
                        <option value="Pop">Pop</option>
                        <option value="R&B">R&B</option>
                        <option value="Soul">Soul</option>
                        <option value="Hip-Hop">Hip-Hop</option>
                        <option value="Dream Pop">Dream Pop</option>
                        <option value="Holiday">Holiday</option>
                        <option value="Contemporary R&B">Contemporary R&B</option>
                        <option value="Indonesian Hip Hop">Indonesian Hip Hop</option>
                        <option value="UK R&B">UK R&B</option>
                        <option value="Afroswing">Afroswing</option>
                </select>
        </form>
        </div>

        <div id="songs-container">

        </div>

        <script>
                function showSongs(songs, genre = null)
                {
                        let html = ''

                        console.log(songs)
                        for (let i = 0; i < songs.length; i++) {
                                const song = songs[i]
                                if (genre == null || song.genre.includes(genre)) {
                                        html += '<h2 id="song-title">' + song.title + '</h2>'
                                        html += '<p id="song-artist"> <span class="header">Artist(s): </span>' + song.artists.join(", ") + '</p>'
                                        html += '<p id="song-genre"> <span class="header">Genre(s): </span>' + song.genre.join(", ") + '</p>'
                                        html += '<p id="song-year"> <span class="header">Release Year: </span>' + song.year + '</p>' + '<br>'
                                }
                        }

                        document.getElementById('songs-container').innerHTML = html
                }

                $(document).ready(function(){
                        let songs;
			$.ajax({
				url: "https://raw.githubusercontent.com/amandawu1/cs20hw7/main/json2.html",
				dataType: "html",
				success: function(data) {
					songs = JSON.parse(data);
                                        $(showSongs(songs));
                                        console.log(songs);
				}
			});
                        $('select').change(function (event) {
                                if (event.target.value == 'All') {
                                        showSongs(songs)
                                } else {
                                        showSongs(songs, event.target.value)
                                }
                        });
		});
        </script>

</body>
</html>
